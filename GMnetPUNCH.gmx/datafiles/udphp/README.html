<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>README.html</title>
  <meta name="generator" content="Haroopad 0.12.2" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>div.oembedall-githubrepos{border:1px solid #DDD;border-radius:4px;list-style-type:none;margin:0 0 10px;padding:8px 10px 0;font:13.34px/1.4 helvetica,arial,freesans,clean,sans-serif;width:452px;background-color:#fff}div.oembedall-githubrepos .oembedall-body{background:-moz-linear-gradient(center top,#FAFAFA,#EFEFEF) repeat scroll 0 0 transparent;background:-webkit-gradient(linear,left top,left bottom,from(#FAFAFA),to(#EFEFEF));border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-top:1px solid #EEE;margin-left:-10px;margin-top:8px;padding:5px 10px;width:100%}div.oembedall-githubrepos h3{font-size:14px;margin:0;padding-left:18px;white-space:nowrap}div.oembedall-githubrepos p.oembedall-description{color:#444;font-size:12px;margin:0 0 3px}div.oembedall-githubrepos p.oembedall-updated-at{color:#888;font-size:11px;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats{border:medium none;float:right;font-size:11px;font-weight:700;padding-left:15px;position:relative;z-index:5;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats li{border:medium none;color:#666;display:inline-block;list-style-type:none;margin:0!important}div.oembedall-githubrepos ul.oembedall-repo-stats li a{background-color:transparent;border:medium none;color:#666!important;background-position:5px -2px;background-repeat:no-repeat;border-left:1px solid #DDD;display:inline-block;height:21px;line-height:21px;padding:0 5px 0 23px}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a{border-left:medium none;margin-right:-3px}div.oembedall-githubrepos ul.oembedall-repo-stats li a:hover{background:none no-repeat scroll 5px -27px #4183C4;color:#FFF!important;text-decoration:none}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a:hover{border-bottom-left-radius:3px;border-top-left-radius:3px}ul.oembedall-repo-stats li:last-child a:hover{border-bottom-right-radius:3px;border-top-right-radius:3px}span.oembedall-closehide{background-color:#aaa;border-radius:2px;cursor:pointer;margin-right:3px}div.oembedall-container{margin-top:5px;text-align:left}.oembedall-ljuser{font-weight:700}.oembedall-ljuser img{vertical-align:bottom;border:0;padding-right:1px}.oembedall-stoqembed{border-bottom:1px dotted #999;float:left;overflow:hidden;width:730px;line-height:1;background:none repeat scroll 0 0 #FFF;color:#000;font-family:Arial,Liberation Sans,DejaVu Sans,sans-serif;font-size:80%;text-align:left;margin:0;padding:0}.oembedall-stoqembed a{color:#07C;text-decoration:none;margin:0;padding:0}.oembedall-stoqembed a:hover{text-decoration:underline}.oembedall-stoqembed a:visited{color:#4A6B82}.oembedall-stoqembed h3{font-family:Trebuchet MS,Liberation Sans,DejaVu Sans,sans-serif;font-size:130%;font-weight:700;margin:0;padding:0}.oembedall-stoqembed .oembedall-reputation-score{color:#444;font-size:120%;font-weight:700;margin-right:2px}.oembedall-stoqembed .oembedall-user-info{height:35px;width:185px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-gravatar32{float:left;height:32px;width:32px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-details{float:left;margin-left:5px;overflow:hidden;white-space:nowrap;width:145px}.oembedall-stoqembed .oembedall-question-hyperlink{font-weight:700}.oembedall-stoqembed .oembedall-stats{background:none repeat scroll 0 0 #EEE;margin:0 0 0 7px;padding:4px 7px 6px;width:58px}.oembedall-stoqembed .oembedall-statscontainer{float:left;margin-right:8px;width:86px}.oembedall-stoqembed .oembedall-votes{color:#555;padding:0 0 7px;text-align:center}.oembedall-stoqembed .oembedall-vote-count-post{font-size:240%;color:#808185;display:block;font-weight:700}.oembedall-stoqembed .oembedall-views{color:#999;padding-top:4px;text-align:center}.oembedall-stoqembed .oembedall-status{margin-top:-3px;padding:4px 0;text-align:center;background:none repeat scroll 0 0 #75845C;color:#FFF}.oembedall-stoqembed .oembedall-status strong{color:#FFF;display:block;font-size:140%}.oembedall-stoqembed .oembedall-summary{float:left;width:635px}.oembedall-stoqembed .oembedall-excerpt{line-height:1.2;margin:0;padding:0 0 5px}.oembedall-stoqembed .oembedall-tags{float:left;line-height:18px}.oembedall-stoqembed .oembedall-tags a:hover{text-decoration:none}.oembedall-stoqembed .oembedall-post-tag{background-color:#E0EAF1;border-bottom:1px solid #3E6D8E;border-right:1px solid #7F9FB6;color:#3E6D8E;font-size:90%;line-height:2.4;margin:2px 2px 2px 0;padding:3px 4px;text-decoration:none;white-space:nowrap}.oembedall-stoqembed .oembedall-post-tag:hover{background-color:#3E6D8E;border-bottom:1px solid #37607D;border-right:1px solid #37607D;color:#E0EAF1}.oembedall-stoqembed .oembedall-fr{float:right}.oembedall-stoqembed .oembedall-statsarrow{background-image:url(http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3);background-repeat:no-repeat;overflow:hidden;background-position:0 -435px;float:right;height:13px;margin-top:12px;width:7px}.oembedall-facebook1{border:#1A3C6C solid 1px;padding:0;font:13.34px/1.4 verdana;width:500px}.oembedall-facebook2{background-color:#627add}.oembedall-facebook2 a{color:#e8e8e8;text-decoration:none}.oembedall-facebookBody{background-color:#fff;vertical-align:top;padding:5px}.oembedall-facebookBody .contents{display:inline-block;width:100%}.oembedall-facebookBody div img{float:left;margin-right:5px}div.oembedall-lanyard{-webkit-box-shadow:none;-webkit-transition-delay:0s;-webkit-transition-duration:.4000000059604645s;-webkit-transition-property:width;-webkit-transition-timing-function:cubic-bezier(0.42,0,.58,1);background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;border-bottom-width:0;border-left-width:0;border-right-width:0;border-top-width:0;box-shadow:none;color:#112644;display:block;float:left;font-family:'Trebuchet MS',Trebuchet,sans-serif;font-size:16px;height:253px;line-height:19px;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;max-width:none;min-height:0;outline-color:#112644;outline-style:none;outline-width:0;overflow-x:visible;overflow-y:visible;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;position:relative;text-align:left;vertical-align:baseline;width:804px}div.oembedall-lanyard .tagline{font-size:1.5em}div.oembedall-lanyard .wrapper{overflow:hidden;clear:both}div.oembedall-lanyard .split{float:left;display:inline}div.oembedall-lanyard .prominent-place .flag:active,div.oembedall-lanyard .prominent-place .flag:focus,div.oembedall-lanyard .prominent-place .flag:hover,div.oembedall-lanyard .prominent-place .flag:link,div.oembedall-lanyard .prominent-place .flag:visited{float:left;display:block;width:48px;height:48px;position:relative;top:-5px;margin-right:10px}div.oembedall-lanyard .place-context{font-size:.889em}div.oembedall-lanyard .prominent-place .sub-place{display:block}div.oembedall-lanyard .prominent-place{font-size:1.125em;line-height:1.1em;font-weight:400}div.oembedall-lanyard .main-date{color:#8CB4E0;font-weight:700;line-height:1.1}div.oembedall-lanyard .first{width:48.57%;margin:0 0 0 2.857%}html{height:100%}body{margin:0!important;padding:5px 20px 26px!important;background-color:#fff;font-family:"Lucida Grande","Segoe UI","Apple SD Gothic Neo","Malgun Gothic","Lucida Sans Unicode",Helvetica,Arial,sans-serif;font-size:.9em;overflow-x:hidden;overflow-y:auto}br,h1,h2,h3,h4,h5,h6{clear:both}hr.page{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;border:0 none;color:#ccc;height:3px;padding:0}hr.underscore{border:0 none!important;height:30px;padding:0;-webkit-margin-before:0;-webkit-margin-after:0}body >:first-child{margin-top:0!important}img.plugin{box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:3px}iframe{border:0}figure{-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}kbd{border:1px solid #aaa;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:1px 2px 2px #ddd;-webkit-box-shadow:1px 2px 2px #ddd;box-shadow:1px 2px 2px #ddd;background-color:#f9f9f9;background-image:-moz-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-o-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-webkit-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:linear-gradient(top,#eee,#f9f9f9,#eee);padding:1px 3px;font-family:inherit;font-size:.85em}.oembeded .oembed_photo{display:inline-block}img[data-echo]{margin:25px 0;width:100px;height:100px;background:#fff url(../img/ajax.gif) no-repeat center center}.spinner{display:inline-block;width:10px;height:10px;margin-bottom:-.1em;border:2px solid rgba(0,0,0,.5);border-top-color:transparent;border-radius:100%;-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}.spinner:after{content:'';display:block;width:0;height:0;position:absolute;top:-6px;left:0;border:4px solid transparent;border-bottom-color:rgba(0,0,0,.5);-webkit-transform:rotate(45deg);transform:rotate(45deg)}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}p.toc{margin:0!important}p.toc ul{padding-left:10px}p.toc>ul{padding:10px;margin:0 10px;display:inline-block;border:1px solid #ededed;border-radius:5px}p.toc li,p.toc ul{list-style-type:none}p.toc li{width:100%;padding:0;overflow:hidden}p.toc li a::after{content:"."}p.toc li a:before{content:"• "}p.toc h5{text-transform:uppercase}p.toc .title{float:left;padding-right:3px}p.toc .number{margin:0;float:right;padding-left:3px;background:#fff;display:none}.markdown{padding:20px}.markdown a{text-decoration:none;vertical-align:baseline}.markdown a:hover{text-decoration:underline}.markdown h1{font-size:2.2em;font-weight:700;margin:1.5em 0 1em}.markdown h2{font-size:1.8em;font-weight:700;margin:1.275em 0 .85em}.markdown h3{font-size:1.6em;font-weight:700;margin:1.125em 0 .75em}.markdown h4{font-size:1.4em;font-weight:700;margin:.99em 0 .66em}.markdown h5{font-size:1.2em;font-weight:700;margin:.855em 0 .57em}.markdown h6{font-size:1em;font-weight:700;margin:.75em 0 .5em}.markdown h1+p,.markdown h1:first-child,.markdown h2+p,.markdown h2:first-child,.markdown h3+p,.markdown h3:first-child,.markdown h4+p,.markdown h4:first-child,.markdown h5+p,.markdown h5:first-child,.markdown h6+p,.markdown h6:first-child{margin-top:0}.markdown hr{border:1px solid #ccc}.markdown p{margin:1em 0;word-wrap:break-word}.markdown ol{list-style-type:decimal}.markdown li{display:list-item;line-height:1.4em}.markdown blockquote{margin:1em 20px}.markdown blockquote>:first-child{margin-top:0}.markdown blockquote>:last-child{margin-bottom:0}.markdown blockquote cite:before{content:'\2014 \00A0'}.markdown .code{border-radius:3px;word-break:break-all;word-wrap:break-word}.markdown pre{border-radius:3px;word-break:break-all;word-wrap:break-word;overflow:auto}.markdown pre code{display:block}.markdown pre>code{border:1px solid #ccc;white-space:pre;padding:.5em;margin:0}.markdown code{border-radius:3px;word-break:break-all;word-wrap:break-word;border:1px solid #ccc;padding:0 5px;margin:0 2px}.markdown img{max-width:100%}.markdown table{padding:0;border-collapse:collapse;border-spacing:0}.markdown table tr td,.markdown table tr th{border:1px solid #ccc;margin:0;padding:6px 13px}.markdown table tr th{font-weight:700}.markdown table tr th>:first-child{margin-top:0}.markdown table tr th>:last-child{margin-bottom:0}.markdown table tr td>:first-child{margin-top:0}.markdown table tr td>:last-child{margin-bottom:0}.markdown em.underline{font-style:normal;text-decoration:underline}.markdown strong.highlight{color:#000;padding:0 5px;background-color:#fdffb6;-webkit-box-shadow:#fdffb6 0 0 5px;-moz-box-shadow:#fdffb6 0 0 5px;box-shadow:#fdffb6 0 0 5px}@import url(http://fonts.googleapis.com/css?family=Tauri);import url(http://fonts.googleapis.com/css?family=Roboto+Condensed:300italic,400italic,700italic,400,300,700);.haroopad{padding:20px;color:#222;font-size:15px;font-family:'Roboto Condensed',Tauri,"Lucida Grande","Lucida Sans Unicode","Lucida Sans",AppleSDGothicNeo-Medium,'Segoe UI','Malgun Gothic',Verdana,Tahoma,sans-serif;background:#fff;-webkit-font-smoothing:antialiased}.haroopad a{color:#3269a0}.haroopad a:hover{color:#4183c4}.haroopad h2{border-bottom:1px solid #e6e6e6;line-height:1.7em}.haroopad h6{color:#777}.haroopad hr{border:1px solid #e6e6e6}.haroopad blockquote>code,.haroopad h1>code,.haroopad h2>code,.haroopad h3>code,.haroopad h4>code,.haroopad h5>code,.haroopad h6>code,.haroopad li>code,.haroopad p>code,.haroopad td>code{color:#000;background-color:#feecdd;border:1px solid #efdfd0}.haroopad pre>code{font-size:1em;font-family:Consolas,Inconsolata,Courier,monospace;letter-spacing:-1px;font-weight:700}.haroopad blockquote{border-left:4px solid #e6e6e6;padding:0 15px;color:#777}.haroopad table{background-color:#fafafa}.haroopad table tr td,.haroopad table tr th{border:1px solid #e6e6e6}.haroopad table tr:nth-child(2n){background-color:#f2f2f2}.hljs{display:block;overflow-x:auto;padding:.5em;background:#fdf6e3;color:#657b83;-webkit-text-size-adjust:none}.diff .hljs-header,.hljs-comment,.hljs-doctype,.hljs-javadoc,.hljs-pi,.hljs-template_comment,.lisp .hljs-string{color:#93a1a1}.css .hljs-tag,.hljs-addition,.hljs-keyword,.hljs-request,.hljs-status,.hljs-winutils,.method,.nginx .hljs-title{color:#859900}.hljs-command,.hljs-hexcolor,.hljs-link_url,.hljs-number,.hljs-phpdoc,.hljs-regexp,.hljs-rules .hljs-value,.hljs-string,.hljs-tag .hljs-value,.tex .hljs-formula{color:#2aa198}.css .hljs-function,.hljs-built_in,.hljs-chunk,.hljs-decorator,.hljs-id,.hljs-identifier,.hljs-localvars,.hljs-title,.vhdl .hljs-literal{color:#268bd2}.hljs-attribute,.hljs-class .hljs-title,.hljs-constant,.hljs-link_reference,.hljs-parent,.hljs-type,.hljs-variable,.lisp .hljs-body,.smalltalk .hljs-number{color:#b58900}.clojure .hljs-title,.css .hljs-pseudo,.diff .hljs-change,.hljs-attr_selector,.hljs-cdata,.hljs-header,.hljs-pragma,.hljs-preprocessor,.hljs-preprocessor .hljs-keyword,.hljs-shebang,.hljs-special,.hljs-subst,.hljs-symbol,.hljs-symbol .hljs-string{color:#cb4b16}.hljs-deletion,.hljs-important{color:#dc322f}.hljs-link_label{color:#6c71c4}.tex .hljs-formula{background:#eee8d5}footer{position:fixed;font-size:.8em;text-align:right;bottom:0;margin-left:-25px;height:20px;width:100%}</style>
</head>
<body class="markdown haroopad">

  <h2 id="quick-links"><a name="quick-links" href="#quick-links"></a>Quick links</h2><p><strong>Watch the source code of the master server:</strong> <a href="https://github.com/Parakoopa/GameMaker-UDP-Hole-Punching--master-server">https://github.com/Parakoopa/GameMaker-UDP-Hole-Punching--master-server</a><br><strong>Download the binaries of the master server:</strong> <a href="http://parakoopa.de/udphp-master-latest.jar">http://parakoopa.de/udphp-master-latest.jar</a> [Or compile this repo yourself!]</p><h1 id="udphp-(udp-hole-punching-for-game-maker:-studio)"><a name="udphp-(udp-hole-punching-for-game-maker:-studio)" href="#udphp-(udp-hole-punching-for-game-maker:-studio)"></a>udphp (UDP hole punching for Game Maker: Studio)</h1><p><strong><em>- A Game Maker “extension” that allows you to create client/server UDP networking without port forwarding</em></strong></p><h2 id="introduction"><a name="introduction" href="#introduction"></a>Introduction</h2><p>Always wanted to make a multiplayer game? But you don’t want to host your own dedicated servers or want the players to open ports in their firewall? Do you just want them to simply press a button to play wih their friends?</p><p><strong>udphp</strong> allows you to do the impossible! With simply calling a few scripts in your game you can get your game to the next level of multiplayer experience.</p><h2 id="features"><a name="features" href="#features"></a>Features</h2><ul>
<li><strong>Multiplayer without port forwarding</strong> - Your players can enjoy gaming with their friends without having to deal with anoying firewalls</li>
<li><strong>Builtin server and client structure that simply connects with the one you already have</strong> - Just follow the instructions and add it to your game. </li>
<li><strong>Easily extendable to support Peer-to-Peer gaming!</strong></li>
<li><strong>Open source (GPLv3)</strong> - You have the source code, you can modify it in any way you want and also use it as much as you want</li>
<li><strong>Simple to use with tutorials and sample project</strong> - You download the sample project with all required <em>udphp</em> scripts. You can just press play and try it out.</li>
<li><strong>Well documented</strong> - Not only do you get a sample project! <em>udphp</em> is well documented and easy to read. And since it’s open source and you bought it, you can easily change it to your needs.</li>
<li><strong>Easy to use</strong> - For both you and the players!</li>
<li><strong>Using a master/mediation/rendevouz server…</strong> - You don’t need to host a whole game server, you only need a small lightweight server that connects the clients to your server</li>
<li><strong>…which is also open source</strong> - You can create your own master server or use ours. Simply download the sourcecode or the java binarys at <a href="https://github.com/Parakoopa/GameMaker-UDP-Hole-Punching--master-server">https://github.com/Parakoopa/GameMaker-UDP-Hole-Punching--master-server</a></li>
<li><strong>Fallback mode when UDP hole punching doesn’t work</strong> - In local networks <em>udphp</em> will automatically try to connect directly to the server.</li>
<li><strong>Infinite clients</strong> - Supports infinite clients in a single game.</li>
</ul><h2 id="what-is-udp-hole-punching?"><a name="what-is-udp-hole-punching?" href="#what-is-udp-hole-punching?"></a>What is UDP hole punching?</h2><p><strong>UDP hole punching</strong> is a technique that allows UDP packets to be send, that normally a NAT would block.<br>Normally if you want to host a game, you have to open the ports, because otherwise your NAT would block the UDP (or TCP) packets that are required for network communication.<br>UDP hole punching works because in the process the client does not simply “connect” to the server. The server also sends packets back, which means both try to connect at the same time to each other. Then both NATs will accept the connection.</p><p>The problem is that at least the server doesn’t know when a client connects to it. That’s why we need a (globally reachable= master server. The server registers at the master server and opens a TCP connection so the master server can send the client informations*. When a client tries to connect, it also registers it’s UDP port at the master server and tells it to which server it wants to connect. If the server is found, the ports will be send backd via TCP. The client get’s the server port/ip and the server the client port/ip.<br>Then both send the packets and the hole is punched. Both players are connected to each other.</p><p>* TCP allows the master server to send packets back to the server. That’s because TCP works with connections and if the server opens a connection to the master server, both can send packets to each other, even if the server is behind a NAT.</p><p>(Source: <a href="http://en.wikipedia.org/wiki/UDP_hole_punching">http://en.wikipedia.org/wiki/UDP_hole_punching</a>)</p><h2 id="requirements"><a name="requirements" href="#requirements"></a>Requirements</h2><p>Besides a valid <strong>Game Maker: Studio</strong> license you will also need to host a master server somewhere. “Somewhere” means it has to be reachable from the internet! [Ports must be opened]<br><strong>Also please note that this only works with UDP game servers!</strong> - Setting up UDP game servers in Game Maker is very differnt from TCP game servers since UDP is connectionless. If you need help, contact me!</p><h2 id="wait,-i-need-to-host-a-" master-server"?!---where-do-i-get-that?"=""><a name="wait,-i-need-to-host-a-" master-server"?!---where-do-i-get-that?"="" href="#wait,-i-need-to-host-a-"></a>Wait, I need to host a “master server”?! - Where do I get that?</h2><p>The server that is needed to connect clients and servers is free software and the source code can be found at the top of the page.</p><p>It is written in java and you can either download the binarys or the well-documented source code. Adjust the mediation server to fit your needs or write your own (you can find the communication “protocol” below)<br>It comes with everything that is needed for TCP and UDP communication with Game Maker: Studio and can also be used to create a dedicated multiplayer server or something elese.</p><p>You need to host this server yourself. If you can’t right now,  contact me, I can host a server for you for testing purposes. For the demo you can also connect to the default IP and port (please note that this demo server might be down).</p><h2 id="implementing-udphp-in-your-game-/-working-with-the-demo-project"><a name="implementing-udphp-in-your-game-/-working-with-the-demo-project" href="#implementing-udphp-in-your-game-/-working-with-the-demo-project"></a>Implementing udphp in your game / working with the demo project</h2><p><em>This refers to the Game Maker Project. To run the master server simply run [linux with installed oracle jre]: “java -jar NAME.jar”</em></p><p>To implement udphp in your game copy all <strong>scripts</strong> and the behaviour of all the objects to your game and adjust them to your needs. When copying the behaviour, you can simply use your existing server/client objects and add the codes at the top of your events.</p><h3 id="obj_control"><a name="obj_control" href="#obj_control"></a>obj_control</h3><p>Let’s actually talk about this “behaviour”:<br>I will not go over the debug objects in the sample project, I will only guide you through the neccassry objects/code.<br>Let’s start with object <strong>obj_control</strong>. The only important thing in <em>obj_control</em> is the <strong>create event</strong>.<br>In the create event you can find, that <strong>udphp_config</strong> is called. This is the <strong>first</strong> you have to call when you want to use udphp.</p><p><strong><em>How to use udphp_config (arguments)</em></strong>:</p><ul>
<li><strong>master_ip(stringl)</strong> -&gt; The IP of the master server that both server and client will use to connect to each other. Confused? See the section <em>Wait, I need to host a “master server”?! - Where do I get that?</em>.</li>
<li><strong>master_port(real)</strong> -&gt; The UDP and TCP port the master server listens on.</li>
<li><strong>reconnect intverval(real)</strong> -&gt; After this amount of steps the server will reconnect to the master server. This has to be done, to ensure the server is always connected to the master server. Future versions will auto-reconnect on loss of connection, but we are still testing that out.</li>
<li><strong>connection timeout(real)</strong> -&gt; After this amount of time the server and client will give up to connect t eachother. The client will display a connection failed message. This timeout will also be used if you set the client to directly connect to the server.</li>
<li><strong>debug(boolean [0/false or 1/true])</strong> -&gt; Show more debug messages. Not recommended for production use.</li>
<li><strong>silent(boolean)</strong> -&gt; This will turn ALL debug messages off. Recommended for production use.</li>
</ul><p>Copy the call of this script to your game startup or somewhere else where it get’s called before the other udphp scripts. Make sure no global variables starting with udphp_ are used. These are reserved for <em>udphp</em>.</p><h3 id="server-and-client"><a name="server-and-client" href="#server-and-client"></a>Server and client</h3><p>Okay so we are done in obj_control. Let’s go to <strong>obj_server</strong> and <strong>obj_client</strong>. Both have the same structure.<br><em>udphp</em> uses the <strong>create event</strong>, the <strong>step event</strong> and the <strong>networking event</strong> of both. The following scripts can jsut be inserted as [the first] entries in these events. The udphp scripts will only run when needed and they won’t interupt your networking. If they do, please contact the support!</p><h4 id="server"><a name="server" href="#server"></a>Server</h4><h5 id="server-create-event"><a name="server-create-event" href="#server-create-event"></a>Server create event</h5><p><strong>obj_server’s create event</strong> get’s called on server creation (obviously). You need to create a <strong>player list (ds_list)</strong> there. This list will be used by udphp to store all players in. How to use them in your game will be explained later, but this is your only way to tell which player communicates with the server!<br>You will also need a <strong>buffer</strong> that will be used for communication by the server. It should either be large or a growing buffer. The last thing you’ll need is a <strong>UDP server created by network_create_server(network_socket_udp,{port},{maxplayers}</strong>. All these will be fed into the <strong>udphp_createServer</strong> script.</p><p><strong><em>How to use udphp_createServer (arguments)</em></strong>:</p><ul>
<li><strong>server</strong> - A UDP server</li>
<li><strong>buffer</strong> - A buffer</li>
<li><strong>player-list</strong> - A ds_list that will store all players (more information below)</li>
</ul><p><strong>udphp_createServer</strong> will return either true or false. If the returned value is false, the server creation failed.</p><pre><code class="gml hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;gml&quot;&gt;player_list = ds_list_create();
buffer = buffer_create(256, buffer_grow, 1);
server = network_create_server(network_socket_udp,1234,32);
ret = udphp_createServer(server,buffer,player_list);
if (!ret) {
    //Server could not be created. Destroy instace. UDPHP will also show a message if not silent.
    instance_destroy();
}
&lt;/code&gt;&lt;/pre&gt;">player_list = ds_list_create();
buffer = buffer_create(256, buffer_grow, 1);
server = network_create_server(network_socket_udp,1234,32);
ret = udphp_createServer(server,buffer,player_list);
if (!ret) {
    //Server could not be created. Destroy instace. UDPHP will also show a message if not silent.
    instance_destroy();
}
</code></pre><h5 id="server-step-event"><a name="server-step-event" href="#server-step-event"></a>Server step event</h5><p><strong>In obj_server’s step event</strong> the actual magic happens. Just run <strong>udphp_serverPunch</strong> with no arguments.</p><h5 id="server-networking-event"><a name="server-networking-event" href="#server-networking-event"></a>Server networking event</h5><p><strong>And in obj_server’s networking event</strong> we share the magic: Simply run <strong>udphp_serverNetworking</strong> with no arguemnts.  </p><h5 id="server:-client-identification"><a name="server:-client-identification" href="#server:-client-identification"></a>Server: Client identification</h5><p><strong>To identify clients</strong> in the networking event, you take the <strong>ip</strong> and the <strong>port</strong>of <strong>async_load</strong> and check if they are in the player list you created earlier. The player list stores keys in the format “ip:port”.</p><h6 id="to-see-if-a-player-is-in-the-player-list:"><a name="to-see-if-a-player-is-in-the-player-list:" href="#to-see-if-a-player-is-in-the-player-list:"></a>To see if a player is in the player list:</h6><pre><code class="gml hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;gml&quot;&gt;var in_ip = ds_map_find_value(async_load, &quot;ip
var in_port = ds_map_find_value(async_load, &quot;port&quot;);
var exists = ds_list_find_index(player_list, in_ip+&quot;:&quot;+string(in_port));
//exists will give you the position of the player in the list or -1 if he's not in there
&lt;/code&gt;&lt;/pre&gt;">var in_ip = ds_map_find_value(async_load, "ip
var in_port = ds_map_find_value(async_load, "port");
var exists = ds_list_find_index(player_list, in_ip+":"+string(in_port));
//exists will give you the position of the player in the list or -1 if he's not in there
</code></pre><h6 id="to-get-ip-and-port-of-a-player-entry:"><a name="to-get-ip-and-port-of-a-player-entry:" href="#to-get-ip-and-port-of-a-player-entry:"></a>To get ip and port of a player entry:</h6><pre><code class="gml hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;gml&quot;&gt;var entry = /* Entry from the player list */
var ip = udphp_playerListIP(entry);
var port = udphp_playerListPort(entry);
&lt;/code&gt;&lt;/pre&gt;">var entry = /* Entry from the player list */
var ip = udphp_playerListIP(entry);
var port = udphp_playerListPort(entry);
</code></pre><p>To send a message to all players iterate over the player list and send a packet to all players (see hello world demo in step event).</p><h4 id="client"><a name="client" href="#client"></a>Client</h4><h5 id="client-create-event"><a name="client-create-event" href="#client-create-event"></a>Client create event</h5><p><strong>To create the udphp client</strong> with <strong>udphp_createClient</strong> you need a <strong>UDP socket (not server!)</strong>, a <strong>buffer</strong>, as well as the <strong>server ip</strong>. The rest is explained in the argument listing:<br><strong><em>How to use udphp_createClient (arguments)</em></strong>:</p><ul>
<li><strong>UDP client socket</strong> - A UDP socket</li>
<li><strong>Server IP(string)</strong> - The IP of the server to connect to (not the master server ip!)</li>
<li><strong>buffer</strong> - A buffer</li>
<li><strong>directconnect(bool)</strong> - If you set this to true, udphp will be bypassed. The client willdirectly connect to the server without hole punching. directconnect is automatically set to true when the master server is down or the server is not registered at the master server</li>
<li><strong>server_port(real)</strong> - This is optional. Set to 0 when unkown. This will be used (and is then required for successful connection) when the client connects directly and ONLY then. See above to know when it connects directly.</li>
</ul><p><strong>IMPORTANT:</strong> The function will <strong>return the client id you have to store</strong>. This id is used to identify this client. Using this you can run multiple clients in one game (as used in the demo). It will return -1 if the client could not be created.</p><pre><code class="gml hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;gml&quot;&gt;buffer = buffer_create(256, buffer_grow, 1);
client = network_create_socket(network_socket_udp);

client_id = udphp_createClient(client,server_ip,buffer,false,1234);
if (client_id &amp;lt; 0) {
    //Client could not be created. Destroy instace. UDPHP will also show a message if not silent.
    instance_destroy();
}
`
&lt;/code&gt;&lt;/pre&gt;">buffer = buffer_create(256, buffer_grow, 1);
client = network_create_socket(network_socket_udp);

client_id = udphp_createClient(client,server_ip,buffer,false,1234);
if (client_id &lt; 0) {
    //Client could not be created. Destroy instace. UDPHP will also show a message if not silent.
    instance_destroy();
}
`
</code></pre><h5 id="client-step-event"><a name="client-step-event" href="#client-step-event"></a>Client step event</h5><p><strong>In the step event</strong> simply run <strong>udphp_clientPunch</strong> with the <strong>stored client id as argument</strong>. This function will return false if the client’s connection failed. This is the only way to determine if a connection process failed and it will return true in all other cases.</p><pre><code class="gml hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;gml&quot;&gt;if (!udphp_clientPunch(client_id)) {
    //When this returns false, the connection failed or the client was destroyed.
    show_message(&quot;Connection failed!&quot;);
    instance_destroy();
}
`
&lt;/code&gt;&lt;/pre&gt;">if (!udphp_clientPunch(client_id)) {
    //When this returns false, the connection failed or the client was destroyed.
    show_message("Connection failed!");
    instance_destroy();
}
`
</code></pre><h5 id="client-networking-event"><a name="client-networking-event" href="#client-networking-event"></a>Client networking event</h5><p><strong>In the networking event simply call udphp_clientNetworking with the client id as an argument.</strong></p><h5 id="client:-get-ip-anf-port-of-server-/-check-if-connected"><a name="client:-get-ip-anf-port-of-server-/-check-if-connected" href="#client:-get-ip-anf-port-of-server-/-check-if-connected"></a>Client: Get IP anf Port of server / check if connected</h5><p>To communicate with the server after you are connected you of course need <strong>IP and port of the server</strong>, you also need to know <strong>if you are already connected</strong>.<br>To do that use these functions:</p><pre><code class="gml hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;gml&quot;&gt;var connected = udphp_clientIsConnected(client_id); //true or false
if (connected) {
   //The next functions will return invalid information if you use them without making sure you are connected:
   var ip = udphp_clientGetServerIP(client_id); //String
   var port = udphp_clientGetServerPort(client_id); //real
}
&lt;/code&gt;&lt;/pre&gt;">var connected = udphp_clientIsConnected(client_id); //true or false
if (connected) {
   //The next functions will return invalid information if you use them without making sure you are connected:
   var ip = udphp_clientGetServerIP(client_id); //String
   var port = udphp_clientGetServerPort(client_id); //real
}
</code></pre><p>Please see the hello world demo scripts in obj_client for an example.</p><h4 id="congratulations!-udphp-is-set-up!"><a name="congratulations!-udphp-is-set-up!" href="#congratulations!-udphp-is-set-up!"></a>Congratulations! UDPHP is set up!</h4><h2 id="scripts-[game-maker]"><a name="scripts-[game-maker]" href="#scripts-[game-maker]"></a>Scripts [Game Maker]</h2><p><em>These are very brief and incomplete information. Detailed information can be found in the script files</em></p><p>The following scripts arescripts <strong>YOU as the game developer</strong> use:</p><h5 id="setup:"><a name="setup:" href="#setup:"></a>Setup:</h5><ul>
<li><strong>udphp_config</strong><br>One-time setup script<br>Usage: udphp_config(master_ip,master_port,reconnect_intv,timeouts,debug,silent)</li>
</ul><h4 id="server:"><a name="server:" href="#server:"></a>Server:</h4><ul>
<li><strong>udphp_createServer</strong><br>To be used in the Create event of the server<br>Usage: udphp_createServer(udp_server,buffer,player_list)</li>
<li><strong>udphp_serverPunch</strong><br>To be used in the step event of the server<br>Usage: udphp_serverPunch()</li>
<li><strong>udphp_serverNetworking</strong><br>To be used in the networking event of the server<br>Usage: udphp_serverNetworking()</li>
<li><strong>udphp_stopServer</strong><br>Usage: udphp_stopServer()<br>Delete the instance afterwards</li>
</ul><h5 id="client:"><a name="client:" href="#client:"></a>Client:</h5><ul>
<li><strong>udphp_createClient</strong><br>To be used in the Create event of the client<br>Note: Returns client id<br>Usage: udphp_createClient(udp_socket,server_ip,buffer,directconnect,directconnect_port)</li>
<li><strong>udphp_clientPunch</strong><br>To be used in the step event of the client<br>Usage: udphp_clientPunch(id)</li>
<li><strong>udphp_clientNetworking</strong><br>To be used in the networking event of the client<br>Usage: udphp_clientNetworking(id)</li>
<li><strong>udphp_stopClient</strong><br>Usage: udphp_stopClient(client_id)<br>Instance should be deleted with the false return value of clientPunch</li>
</ul><h5 id="tools:"><a name="tools:" href="#tools:"></a>Tools:</h5><ul>
<li><strong>udphp_clientGetServerIP</strong><br>[for client] This will return the server ip of this client and should only be used if the client is connected.<br>Usage: udphp_clientGetServerIP(client_id)</li>
<li><strong>udphp_clientGetServePort</strong><br>[for client] This will return the server port of this client and should only be used if the client is connected.<br>Usage: udphp_clientGetServerPort(client_id)</li>
<li><strong>udphp_playerListIP</strong><br>[for server] Get an ip out of a player list entry (see serverCreate for details)<br>Usage: udphp_playerListIP(player)</li>
<li><strong>udphp_playerListPort</strong><br>[for server] Get an port out of a player list entry (see serverCreate for details)<br>Usage: udphp_playerListPort(player)</li>
<li><strong>udphp_clientIsConnected</strong><br>[for client] With this you can check if your client has conncted to the server.<br>Usage: udphp_clientIsConnected(client_id)</li>
</ul><h2 id="udphp-" protocol"-(for-building-your-own-server)"=""><a name="udphp-" protocol"-(for-building-your-own-server)"="" href="#udphp-"></a>udphp “protocol” (for building your own server)</h2><p>This is a linear breakdown of what packets are sent:</p><p><strong>SERVER:</strong><br>-&gt; Sends UDP packet to master server containing the string “reg” with the line feed character (unicode 10) at the end<br>-&gt; (Re-)connects via TCP to master server<br>-&gt; Sends TCP packet to master server containing the string “reg” with the line feed character (unicode 10) at the end<br>-&gt; Repeats every X minutes [alternative smethod is to reconnect when TCP socket is closed]</p><p><strong>MASTER SERVER:</strong><br>&lt;- When recieving the UDP packet with “reg” the UDP port for that server get’s saved<br>&lt;- When recieving the TCP packet with “reg” this connection socket is saved   so the master server can use it later to communicate with the server</p><p><strong>CLIENT:</strong><br>-&gt; Sends UDP packet to master Server containing the string “connect” with the line feed character (unicode 10) at the end<br>-&gt; Opens TCP connection to master server<br>-&gt; Sends TCP packet to master Server containing the string “connect”+line feed+IP of the server we want to connect to+line feed  </p><p><strong>MASTER SERVER:</strong><br>&lt;- When recieving UDP packet with “connect” the UDP port for that client get’s saved<br>&lt;- When recieving TCP packet that has “connect” in the first line (unicode 10 is used as a newline).</p><ul>
<li>WHEN FOUND:<br>-&gt; Via the client’s TCP socket: Send UDP ip&amp;port of server to client [packet: buffer_s8 (-1), buffer_string (ip), buffer_string (port)]<br>-&gt; Via the server’s TCP socket: Send UDP ip&amp;port of the client to server [packet: buffer_s8 (-1), buffer_string (ip), buffer_string (port)]  </li>
<li>WHEN NOT FOUND:<br>-&gt; Send not found packet to client via TCP [packet: buffer_s8 (-2)]</li>
</ul><p><strong>CLIENT:</strong><br>&lt;- Wait for packet of master server  </p><ul>
<li>-&gt; When id -2 (not found): Connect directly to the server    </li>
<li>-&gt; When id -1 (found): Save the two strings, convert the port to a real and connect to server via UDP and the recieved ip&amp;port (Knock-Knock) [packet: buffer_s8 (-3)]</li>
</ul><p><strong>SERVER:</strong><br>&lt;- Wait for packet of master server</p><ul>
<li>-&gt; When id -1 (found): Save the two strings, convert the port to a real and connect to client via UDP and the recieved ip&amp;port (Knock-Knock) [packet: buffer_s8 (-3)]</li>
</ul><p>&lt;- Wait for incoming client Knock-Knock packet (-3):  </p><ul>
<li>-&gt; When not already connected with this client: add it to the connected clients and send a welcome packet via UDP back to the client that sent this packet [packet: buffer_s8 (-4)}</li>
</ul><p><strong>CLIENT:</strong><br>-&gt; When recieving the welcome packet: Mark client as connected.<br>-&gt; When not recieving a welcome packet after a timeout: Tell the player the connection failed</p><p>Without hole punching the client simply sends the Knock-Knock packets to the server and waits for the servers welcome message.</p><h2 id="support-&amp;-contact"><a name="support-&amp;-contact" href="#support-&amp;-contact"></a>Support &amp; Contact</h2><p>If you want to improve udphp or if you have questions, have problems or found bugs, please contact me via:<br>     parakoopa@live.de</p><p><strong><em>LICENSING INFORMATION CAN BE FOUND IN THE LICENSE FILE</em></strong></p>

<footer style="position:fixed; font-size:.8em; text-align:right; bottom:0px; margin-left:-25px; height:20px; width:100%;">generated by <a href="http://pad.haroopress.com" target="_blank">haroopad</a></footer>
</body>
</html>
